üí∞ Protocolo de Gesti√≥n de Tarifas y Descuentos v6.5

Proyecto: Aliun Travel - B√≥veda de Producci√≥n

Concepto: Ingesta Global Anual + Ajustes Mensuales/Trimestrales

Estado: üîµ DISE√ëO DE L√ìGICA COMERCIAL

üèóÔ∏è 1. Arquitectura de Dos Capas

Para permitir que el Admin descuente un 5% sobre la tarifa global de $250 USD, el sistema operar√° bajo dos capas de datos:

Capa A: Ingesta Global (Anual)

Origen: Contratos directos de la propiedad.

Frecuencia: 1 vez al a√±o.

Tabla: public.rates (Campos adult_rate, child_rate).

Funci√≥n: Es el precio de referencia (MSRP).

Capa B: Ajuste T√°ctico (Mensual/Trimestral)

Origen: Admin de Aliun Travel.

Frecuencia: Bajo demanda (Ajustes de mercado).

Campo: discount_percentage (Nuevo campo propuesto).

L√≥gica: El motor de reservas calcular√°: Precio Final = Tarifa Global * (1 - Descuento/100).

‚öôÔ∏è 2. Flujo de Edici√≥n en el Admin

Cuando el Director decida motivar a los clientes:

Selecci√≥n: Se elige el hotel y el rango de fechas (Temporada).

Modificaci√≥n: En el campo "Ajuste Comercial", se ingresa el valor (ej: 5).

Persistencia: Supabase actualiza el campo discount_percentage en la tabla rates.

Reflejo en Vitrina: El motor de reservas mostrar√° el precio original tachado y el nuevo precio con el 5% aplicado, aumentando la conversi√≥n psicol√≥gica.

üìä 3. Ejemplo de C√°lculo Industrial

Tarifa Global Inyectada: $250.00 USD.

Descuento Admin: 5%.

Impuestos (ITBIS): 0% (Seg√∫n configuraci√≥n de B√≥veda).

Precio en Pantalla: $237.50 USD.

üöÄ 4. Mandato para el Motor de Reservas

El motor debe priorizar siempre la b√∫squeda por:

hotel_id + fecha_viaje.

Verificar si existe un discount_percentage > 0.

Aplicar la reducci√≥n antes de generar el Total_Quote.

Nota T√©cnica: Esta estructura permite "apagar" los descuentos al final del trimestre simplemente reseteando el campo a 0, volviendo instant√°neamente a la tarifa global de la propiedad.

Verdad Industrial v6.5 - Estrategia Comercial Aliun Travel
